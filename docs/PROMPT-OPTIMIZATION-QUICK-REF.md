# 智能体提示词优化 - 快速参考

## 智能体名称变更

| 原名称 | 新名称 | ID | 专长领域 |
|--------|--------|-----|----------|
| 艾莲娜 | **艾莲** | elena | 哲学、文学、艺术、思辨 |
| 莉娜 | **莉子** | rina | 动漫、游戏、二次元、美食 |
| 克洛伊 | **克洛伊** | chloe | 科技、设计、未来主义 |
| 安娜 | **安妮** | anna | 音乐、电台、故事、都市生活 |
| 苏菲 | **苏菲** | sophie | 旅行、摄影、自然、人文 |

## 关键词路由映射

### 艾莲 (Elena) 
**触发词**：文学、哲学、艺术、思考、逻辑、诗意、巴黎、咖啡、阅读

### 莉子 (Rina)
**触发词**：动漫、游戏、二次元、日本、东京、可爱、美食、手作、cos

### 克洛伊 (Chloe)
**触发词**：科技、设计、建筑、时尚、未来、虚拟、赛博、AI、数字艺术

### 安妮 (Annie)
**触发词**：音乐、电台、播客、采访、纽约、故事、生活、都市、夜景

### 苏菲 (Sophie)
**触发词**：旅行、摄影、自然、风景、人文、光影、构图、世界

## 图片生成格式规范

### ✅ 正确格式
```markdown
刚才在咖啡馆窗边捕捉到这样的光影 ![巴黎咖啡馆窗边](https://example.com/image.jpg)
```

### ❌ 错误格式
```markdown
这是图片链接：https://example.com/image.jpg
[点击查看图片](https://example.com/image.jpg)
```

## 路由策略优先级

1. **上下文连贯** (最高优先级)
   - 如果上一条回复来自某个专家，用户继续相关话题 → 路由到同一专家

2. **明确指名**
   - 用户明确提到智能体名称 → 路由到指定专家

3. **关键词匹配**
   - 识别消息中的关键词 → 路由到最匹配的专家

4. **语气风格**
   - 活泼→莉子，理性→艾莲，冷静→克洛伊，轻松→安妮，淡然→苏菲

5. **话题领域**
   - 根据总体话题内容选择最合适的专家

## 测试检查清单

### ✅ 路由测试
- [ ] 关键词触发是否准确
- [ ] 上下文是否能正确延续
- [ ] 隐式意图是否被识别
- [ ] 名称指定是否响应

### ✅ 图片测试
- [ ] 图片是否以Markdown格式输出
- [ ] 图片是否直接在界面渲染
- [ ] 图片风格是否符合智能体特性

### ✅ 对话测试
- [ ] 多轮对话是否保持连贯
- [ ] 智能体是否保持人格一致
- [ ] 语气风格是否符合设定

## 常见问题

### Q: 为什么要删除数据库重新初始化？
A: 因为智能体名称和配置都已更改，旧数据库中的配置不匹配。

### Q: 图片不显示怎么办？
A: 检查：
1. MCP图片生成工具是否正确配置
2. 智能体是否按Markdown格式输出
3. 前端Markdown渲染是否启用

### Q: 路由不准确怎么办？
A: 检查：
1. 是否重新初始化了数据库
2. Triage Agent的提示词是否已更新
3. 对话历史是否正确传递

## 快速重启步骤

```powershell
# 1. 停止所有相关进程
# 2. 删除旧数据库
Remove-Item "c:\github\agent-framework-tutorial-code\data\agentgroupchat.db" -Force

# 3. 重新启动应用
cd c:\github\agent-framework-tutorial-code\src\AgentGroupChat.AppHost
dotnet run

# 4. 访问 Web 界面测试
# http://localhost:5000 (或你配置的端口)
```

## 示例对话场景

### 场景1：文学讨论
```
用户："《百年孤独》真的很难懂"
→ 路由到艾莲（关键词：文学）

用户："马尔克斯的魔幻现实主义是什么意思？"
→ 继续路由到艾莲（上下文延续）
```

### 场景2：游戏推荐
```
用户："最近有什么新游戏？"
→ 路由到莉子（关键词：游戏）

用户："RPG类的有吗？"
→ 继续路由到莉子（上下文延续）
```

### 场景3：旅行分享
```
用户："去云南旅行有什么建议？"
→ 路由到苏菲（关键词：旅行）

用户："丽江的光线适合拍照吗？"
→ 继续路由到苏菲（上下文延续+关键词：拍照）
```

---

**版本**：v1.0  
**更新日期**：2025-10-27  
**适用于**：AgentGroupChat项目优化后版本
